# 项目遗留问题/改进点
- 个人想到的本项目的一些问题和改进点，要期末了，也来不及实现了

## 页面
1. 尽量调整一下页面吧，现在看起来字体、布局上还是欠缺美观和协调。
2. 主界面区分展示公司服务器和个人服务器

## 权限管理
1. 目前用户只能是一个公司的成员，是否可以修改一下数据库，让一个用户可以同时归属于多个公司
2. 目前限制更换管理员只能更换给其他公司成员，可以改为允许更换为公司外用户。
3. 增加功能：管理员可以选择是否开放公司的内任意服务器的读写权限。（目前是公司成员可以查看公司所有服务器，这些服务器都是归属于公司管理员）
4. 公司成员可以看到公司的所有服务器，以及“删除”按钮，虽然后端会判断是否有权限删除，但是还是建议在前端就进行判断，并选择是否显示“删除按钮”
5. 用户权限级别增加一个公司所有者，创建公司时仍默认创建者为公司管理员。公司所有者拥有添加/删除属于公司的服务器以及其他所有与公司相关的权限；而公司管理员不能添加/删除公司的服务器以及更换管理员，但是拥有其他所有与公司相关的权限。对服务器的归属做调整：（如下类型）
    1）属于个人（对于个人用户和公司所有者来说）
    2）属于公司（对于公司普通成员和公司管理员来说）
    （例外：公司的服务器属于公司和公司所有者，不属于公司管理员和公司普通成员）
    须调整更换管理员时的后端处理过程。
（目前一个用户若是是一个公司的管理员，则相当于把自己的所有服务器同时归属于公司，公司成员可看——有点管理员让其他公司成员帮忙照看自己的服务器的意思）

## 脚本与代理
1. 添加服务时的os、platform、kernel_arch可以不用用户输入，而是放在脚本里面，自动获取，并向平台发送更新服务器的请求进行更新，减少用户输入操作。
2. 是否可以增加支持window系统的脚本和代理程序
3. 当前的代理程序编译后生成的二进制文件受系统的glib版本影响（在较高版本下编译的二进制文件不支持较低版本的运行），可能在某些服务器上执行失败。是否提供更多的编译好的二进制文件，动态选择执行；或者在脚本中clone代理程序的仓库后，安装指定版本的golang，进行代理程序的编译，避免glib造成的影响。
4. 代理项目的配置文件中的

## 服务器的处理
1. 为了缓解反向ssh服务的受端口号有限的限制，可以在安装服务器和获取脚本时，查询服务器的IP，尝试是否ping得通，如果ping得通就返回只含配置代理服务的脚本agentscript而不是包含了配置代理服务和反向ssh服务的联合脚本combinedscript。相应的在文件传输创建连接时，也进行判断是否ping的通不，然后再决定用ssh连接还是反向ssh连接。为了方便，也可以直接在host_info表中增加一个表示是否为公网服务器的布尔类型的字段。


## 监控
1. 目前前端的monitor页面即监控的详情页面的前端实现是：
    1）所有的服务器共享同一个全局的变量来记录历史数据；
    2）向后端获取监控数据时是通过url的param参数hostname来确定获取监控数据请求中的hostname参数的。
    导致的问题：
    1）历史数据混乱：切换查看的服务器时，全局历史数据变量记录的最新数据就变成了新查看的服务器的历史数据，导致一部分历史数据是前面服务器的；
    2）一旦切换查看的服务器或切换到其他页面，其他所有服务器所执行的获取监控数据的请求都失败，因为hostname参数只是根据url的param获取，同时刻唯一；
    改进思路：
    系统地管理所有服务器，为每一个服务器都创建独立的环境（独立的历史数据记录、记录自己的hostname值），而不是共用单一的全局历史记录变量和仅通过url来确定请求的hostname参数值

2. 目前添加服务器时生成的唯一的token值无实际用处，考虑删除与这个token相关的部分
    1）hostandtoken表以及所有接口中与之相关的sql操作
    2）脚本中的token参数
    3）代理程序中的token参数
    4）监控数据中HostInfo部分的token字段


## 通知
1. 通知的状态“已确认”应该细化为“已读”、“已同意”、“已拒绝”。其中“已读”用于非请求类的通知，如一般的系统提示，后两个则用于请求类的通知，如公司成员邀请。


## 其他
1. 登录的用户名在url中体现（如：http://www.servermonitor.xyz/:username/*）。后端的main.go中修改路由结构，前端npm install vue-router@4 axios。当前还需要其他修改。
2. 一些数据库操作建议改用事务处理
3. 公司管理页面的搜索没实现
4. 是否使用 TDengine。因为后期展示时发现 tdengine 数据库处理部分有误，导致前端请求监控数据时后端报错，所有就先注释掉调用 tdengine 的部分了，但是初始化部分和相关数据处理函数还是保留着。

当然，还有其他很多可用添加和改进的部分。